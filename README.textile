h2. Develepment environments:

* JDK 1.6 or above
* Maven 3.0.0 or above
* Git (optional)

h2. Download the example:

* git clone git//github.com/h-t-ren/enrima-ws-java-client.git
* or https://github.com/h-t-ren/enrima-ws-java-client and click "zip" button 

h2. Compile and install:
 
  cd enrima-ws-java-client
  mvn clean install

h2. Run:

  cd ui
  mvn tomcat:run   (to stop tomcat: ctrl+c) 

h2. web client:

 http://localhost:8080/enrima-web/

h2. Files:

 * Three modules (pom.xml):

<pre>
<modules>
   <module>oxm</module>  <!--object xml mapping module-->
   <module>core</module> <!--business logic-->
   <module>ui</module>   <!--web module-->
</modules>
</pre>

 * oxm (oxm/pom.xml), the client-side java classes (located in oxm/target/jaxws) will be generated by wsimport maven plugin through the command 'mvn clean install':
 
<pre>
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>jaxws-maven-plugin</artifactId>
     <executions>
	<execution>
	  <goals>
	    <goal>wsimport</goal>
	  </goals>
	  <configuration>
             <wsdlUrls>
		<wsdlUrl>http://www.ime.iiasa.ac.at/enrima_ws_tst1/enrima.wsdl</wsdlUrl>
	     </wsdlUrls>
             <packageName>at.ac.iiasa.ime.enrima.example.client.jaxws</packageName>
	  </configuration>
	</execution>
     </executions>
</plugin>
</pre>

* core: (core/src/main/java/at/ac/iiasa/ime/enrima/example/client/ModelClient.java):

<pre>
package at.ac.iiasa.ime.enrima.example.client;

import java.util.List;
//GetModelDescriptionRequest,GetModelDescriptionResponse...SaveModelDescriptionRequest are generated by wsimport tool:
import at.ac.iiasa.ime.enrima.example.client.jaxws.GetModelDescriptionRequest;
import at.ac.iiasa.ime.enrima.example.client.jaxws.GetModelDescriptionResponse;
import at.ac.iiasa.ime.enrima.example.client.jaxws.Model;
import at.ac.iiasa.ime.enrima.example.client.jaxws.EnrimaService;
import at.ac.iiasa.ime.enrima.example.client.jaxws.ObjectFactory;
import at.ac.iiasa.ime.enrima.example.client.jaxws.GetModelListResponse;
import at.ac.iiasa.ime.enrima.example.client.jaxws.SaveModelDescriptionRequest;

public class ModelClient {
	EnrimaService service = new EnrimaService();
	ObjectFactory objectFactory = new ObjectFactory();

	public List<Model> getAll() {
		GetModelListResponse response = service.getEnrimaSoap11().getModelList(null);
		List<Model> modelList = response.getModel();
		//System.out.println(modelList.size());
		return modelList;
	}

	public Model getById(int idModel) {
		GetModelDescriptionRequest request = objectFactory
				.createGetModelDescriptionRequest();
		request.setIdModel(idModel);
		GetModelDescriptionResponse response = service.getEnrimaSoap11()
				.getModelDescription(request);
		Model m = response.getModel();
		return m;
	}

	public void save(Model model) {
		SaveModelDescriptionRequest request = objectFactory
				.createSaveModelDescriptionRequest();
		request.setModel(model);
		service.getEnrimaSoap11().saveModelDescription(request);

	}
	public static void main(String[] args) {

		ModelClient client = new ModelClient();
		client.getAll();
	}

}

</pre>

* ui (ui/pom.xml), tomcat plugin:

<pre>
<plugin>
   <groupId>org.apache.tomcat.maven</groupId>
   <artifactId>tomcat7-maven-plugin</artifactId>
   <version>2.0-SNAPSHOT</version>
       <configuration>
	 <path>/enrima-web</path>
      </configuration>
</plugin>
</pre>
